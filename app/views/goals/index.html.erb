<header class="flex items-center justify-between">
  <h1 class="text-primary text-xl font-medium"><%= t(".title") %></h1>

  <div class="flex items-center gap-2">
    <%= render DS::Link.new(
      text: t(".new"),
      variant: "primary",
      href: new_goal_path,
      icon: "plus",
      frame: :modal
    ) %>
  </div>
</header>

<div class="space-y-6">
  <% if @active_goals.any? %>
    <section class="bg-container rounded-xl shadow-border-xs p-4">
      <div class="flex items-center gap-1.5 px-4 py-2 text-xs font-medium text-secondary uppercase">
        <p><%= t(".active_goals") %></p>
        <span class="text-subdued">&middot;</span>
        <p><%= @active_goals.count %></p>
      </div>

      <div class="space-y-4 mt-4">
        <% @active_goals.each do |goal| %>
          <%= render partial: "goals/goal", locals: { goal: goal } %>
        <% end %>
      </div>
    </section>
  <% else %>
    <section class="bg-container rounded-xl shadow-border-xs p-8">
      <div class="flex justify-center items-center py-12">
        <div class="text-center flex flex-col items-center max-w-[300px]">
          <%= icon("target", class: "w-12 h-12 text-subdued mb-4") %>
          <p class="text-primary mb-1 font-medium text-sm"><%= t(".empty") %></p>
          <p class="text-secondary text-sm mb-4"><%= t(".empty_description") %></p>

          <%= render DS::Link.new(
            text: t(".new"),
            icon: "plus",
            href: new_goal_path,
            frame: :modal
          ) %>
        </div>
      </div>
    </section>
  <% end %>

  <% if @completed_goals.any? %>
    <section class="bg-container rounded-xl shadow-border-xs p-4">
      <details class="group">
        <summary class="flex items-center gap-1.5 px-4 py-2 text-xs font-medium text-secondary uppercase cursor-pointer">
          <p><%= t(".completed_goals") %></p>
          <span class="text-subdued">&middot;</span>
          <p><%= @completed_goals.count %></p>
          <%= icon("chevron-down", class: "w-4 h-4 ml-auto group-open:rotate-180 transition-transform") %>
        </summary>

        <div class="space-y-4 mt-4">
          <% @completed_goals.each do |goal| %>
            <%= render partial: "goals/goal", locals: { goal: goal } %>
          <% end %>
        </div>
      </details>
    </section>
  <% end %>
</div>
